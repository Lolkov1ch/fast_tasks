{% extends 'base.html' %}
{% block content %}

<h2>{{ object.title }}</h2>
<p><strong>–û–ø–∏—Å:</strong> {{ object.description }}</p>
<p><strong>–°—Ç–∞—Ç—É—Å:</strong> {{ object.get_status_display }}</p>
<p><strong>–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:</strong> {{ object.get_priority_display }}</p>
<p><strong>–î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:</strong> {{ object.due_date|date:"d.m.Y" }}</p>

<hr>

<h3>üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ</h3>

{% for comment in comments %}
  <div style="border:1px solid #ddd; border-radius:6px; padding:8px; margin-bottom:10px;">
    <strong>{{ comment.author.username }}</strong>
    <small style="color:gray;">({{ comment.created_at|date:"d.m.Y H:i" }})</small>
    <p>{{ comment.content }}</p>
  <form method="post" action="{% url 'tasks_app:comment_like' comment.pk %}">
  {% csrf_token %}
  <button type="submit">‚ù§Ô∏è {{ comment.likes.count }}</button>
</form>

    {% if comment.author == user %}
      <a href="{% url 'tasks_app:comment_edit' comment.pk %}">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a> |
      <a href="{% url 'tasks_app:comment_delete' comment.pk %}">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</a>
    {% endif %}
  </div>
{% empty %}
  <p>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤.</p>
{% endfor %}

<hr>

{% if user.is_authenticated %}
<h4>–î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä</h4>
<form method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">–î–æ–¥–∞—Ç–∏</button>
</form>
{% else %}
<p><a href="{% url 'login' %}">–£–≤—ñ–π–¥—ñ—Ç—å</a>, —â–æ–± –∑–∞–ª–∏—à–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä.</p>
{% endif %}

{% endblock %}
