{% extends 'base.html' %}
{% block content %}

<h2 style="text-align:center;">–ú–æ—ó –∑–∞–≤–¥–∞–Ω–Ω—è</h2>

<!-- üîç –§–æ—Ä–º–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó -->
<form method="get" style="margin: 20px auto; max-width: 700px; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
  <div style="display: flex; gap: 10px; flex-wrap: wrap;">
    <div style="flex: 1;">
      <label for="id_status">–°—Ç–∞—Ç—É—Å:</label>
      {{ form.status }}
    </div>
    <div style="flex: 1;">
      <label for="id_priority">–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:</label>
      {{ form.priority }}
    </div>
    <div style="flex: 1;">
      <label for="id_due_date">–î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:</label>
      {{ form.due_date }}
    </div>
  </div>

  <div style="margin-top: 10px; text-align: right;">
    <button type="submit" style="background: #007bff; color: white; border: none; padding: 6px 12px; border-radius: 5px;">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
    <a href="{% url 'tasks_app:task_list' %}" style="margin-left: 10px; text-decoration: none; color: #555;">–°–∫–∏–Ω—É—Ç–∏</a>
  </div>
</form>

<!-- ‚ûï –ö–Ω–æ–ø–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è -->
<div style="text-align: center; margin: 20px 0;">
  <a href="{% url 'tasks_app:task_create' %}"
     style="background-color: #28a745; color: white; padding: 10px 20px;
            border-radius: 6px; text-decoration: none; font-weight: bold;">
    + –î–æ–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è
  </a>
</div>

<hr>

<!-- üìã –¢–∞–±–ª–∏—Ü—è –∑–∞–≤–¥–∞–Ω—å -->
<table style="width: 100%; border-collapse: collapse; font-family: sans-serif;">
  <thead>
    <tr style="background-color: #f4f4f4;">
      <th style="border: 1px solid #ccc; padding: 8px;">–ù–∞–∑–≤–∞</th>
      <th style="border: 1px solid #ccc; padding: 8px;">–°—Ç–∞—Ç—É—Å</th>
      <th style="border: 1px solid #ccc; padding: 8px;">–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç</th>
      <th style="border: 1px solid #ccc; padding: 8px;">–î–∞—Ç–∞</th>
      <th style="border: 1px solid #ccc; padding: 8px;">–î—ñ—ó</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
      <tr>
        <td style="border: 1px solid #ccc; padding: 8px;">{{ task.title }}</td>

        <!-- üé® –∫–æ–ª—å–æ—Ä–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å—ñ–≤ -->
        <td style="border: 1px solid #ccc; padding: 8px;
          {% if task.status == 'todo' %}background-color:#f8d7da;{% endif %}
          {% if task.status == 'in_progress' %}background-color:#fff3cd;{% endif %}
          {% if task.status == 'done' %}background-color:#d4edda;{% endif %}
        ">
          {{ task.get_status_display }}
        </td>

        <td style="border: 1px solid #ccc; padding: 8px;">
          {% if task.priority == 'high' %}
            <span style="color: red; font-weight: bold;">{{ task.get_priority_display }}</span>
          {% elif task.priority == 'medium' %}
            <span style="color: orange;">{{ task.get_priority_display }}</span>
          {% else %}
            <span style="color: green;">{{ task.get_priority_display }}</span>
          {% endif %}
        </td>

        <td style="border: 1px solid #ccc; padding: 8px;">
          {% if task.due_date %}
            {{ task.due_date|date:"d.m.Y" }}
          {% else %}
            ‚Äî
          {% endif %}
        </td>

        <td style="border: 1px solid #ccc; padding: 8px;">
          <a href="{% url 'tasks_app:task_detail' task.pk %}">–î–µ—Ç–∞–ª—ñ</a> |
          <a href="{% url 'tasks_app:task_update' task.pk %}">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a> |
          <a href="{% url 'tasks_app:task_delete' task.pk %}">–í–∏–¥–∞–ª–∏—Ç–∏</a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="5" style="text-align:center; padding: 20px;">–ó–∞–≤–¥–∞–Ω—å –Ω–µ–º–∞—î üòå</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
